"use strict";(self["webpackChunkkyc_v3"]=self["webpackChunkkyc_v3"]||[]).push([[443],{9037:function(e,t,n){n.r(t),n.d(t,{default:function(){return f}});var o=n(3396),i=n(4870);const a=e=>((0,o.dD)("data-v-1c8068ed"),e=e(),(0,o.Cn)(),e),d={key:0,id:"video-wrapper"},c=a((()=>(0,o._)("div",{id:"masking"},null,-1))),l=a((()=>(0,o._)("div",null,null,-1))),s=[l],r=a((()=>(0,o._)("video",{id:"video",autoPlay:"",muted:"",playsInline:"",width:"100%"},null,-1))),u={key:1,id:"notSupport"},m=a((()=>(0,o._)("p",null,"非常抱歉，当前浏览器不支持此功能",-1))),g=a((()=>(0,o._)("p",null,"请使用系统自带Safari浏览器打开",-1))),v=a((()=>(0,o._)("canvas",{id:"canvas"},null,-1)));var w={__name:"photoComponent",setup(e){let t=(0,i.iH)(!1);const n=window.navigator.userAgent.toLowerCase();"micromessenger"===n.match(/micromessenger/i)&&/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?(console.log("当前是ios 微信内置浏览器， 需要用自带safari"),t.value=!1):t.value=!0;const a=e=>navigator.mediaDevices?.getUserMedia?navigator.mediaDevices.getUserMedia(e):navigator.webkitGetUserMedia?navigator.webkitGetUserMedia(e):navigator.mozGetUserMedia?navigator.mozGetUserMedia(e):navigator.getUserMedia?navigator.getUserMedia(e):new Promise(((e,t)=>{t({name:"该设备",message:"暂时无法提供流媒体功能"})})),l=e=>{function t(e,t){return new Promise((n=>{t.srcObject=e,t.onloadedmetadata=function(){t.play(),n()}}))}return a({audio:!1,video:{facingMode:{exact:"environment"}}}).then((n=>t(n,e))).catch((e=>{console.error("访问用户媒体设备失败：",e.name,e.message)}))},w=()=>{const e=document.getElementById("video"),{videoHeight:t,videoWidth:n,offsetHeight:o,offsetWidth:i}=e;return{yRatio:e=>t/o*e,xRatio:e=>n/i*e}},h=()=>{const e=document.getElementById("video"),t=document.getElementById("masking"),n=document.getElementById("canvas");function o(){const{yRatio:o,xRatio:i}=w(),{left:a,top:d,width:c,height:l}=t.getBoundingClientRect();console.log(a,d,c,l);const s=n.getContext("2d");n.width=c,n.height=l,s.drawImage(e,i(a+window.scrollX),o(d+window.scrollY),i(c),o(l),0,0,c,l);const r=n.toDataURL("image/jpeg");let u=document.createElement("img");u.src=r,document.body.before(u)}n.style.display="block",o()},p=()=>{const e=document.createElement("input");e.setAttribute("value",window.location.href),document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),alert("复制成功")};return(0,o.bv)((()=>{if(t.value){const e=document.getElementById("video");l(e)}})),(0,o.wF)((()=>{(function(e,t){let n=null;function o(){n=t.documentElement.clientWidth,t.documentElement.style.fontSize=n/19.2+"px"}o()})(window,document)})),(e,n)=>((0,o.wg)(),(0,o.iD)("div",null,[(0,i.SU)(t)?((0,o.wg)(),(0,o.iD)("div",d,[c,(0,o._)("div",{id:"photo",onClick:h},s),r])):((0,o.wg)(),(0,o.iD)("div",u,[m,g,(0,o._)("button",{onClick:p},"复制当前链接")])),v]))}},h=n(89);const p=(0,h.Z)(w,[["__scopeId","data-v-1c8068ed"]]);var f=p}}]);
//# sourceMappingURL=about.d3e9d7d3.js.map